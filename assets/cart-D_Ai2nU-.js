import{g as p,p as P,b as g,u as x}from"./getCartProductsFromLS-Cys89hF7.js";const E=document.querySelector(".subTotal"),$=document.querySelector(".discount"),h=document.querySelector(".totalAmount"),q=()=>{let o=p().reduce((u,n)=>{let i=parseInt(n.price)||0;return u+i},0),a=Math.round(o*10/100);E.textContent=`₹ ${o}`,$.textContent=`-₹ ${a}`,h.textContent=`₹ ${o-a}`};q();const b=(r,t,o,a,u)=>{const n=document.querySelector(`#card${t}`),i=n.querySelector(".price"),m=n.querySelector(".actualPrice"),c=n.querySelector(".quantity");let e=1,l=0,C=p(),y=C.find(s=>s.id===t);if(y?(e=y.quantity,l=y.price):(l=a,e=e),r.target.classList[0]==="increase"&&(e<o?e+=1:e===o&&(e=o,l=a*o)),r.target.classList[0]==="decrease"&&e>1&&(e-=1),l=Number(a*e),y&&e>=1){let s={id:t,quantity:e,price:l};s=C.map(f=>f.id===t?s:f),localStorage.setItem("cartProducts",JSON.stringify(s)),m.textContent=`₹ ${u*e}`,i.textContent=`₹ ${l}`,c.textContent=e}q()},L=document.querySelector(".cartProductsContainer"),v=document.querySelector("#productCartTemplate");let S=[];P.forEach(r=>{S.push(r)});g.forEach(r=>{S.push(r)});let d=p();const I=(r,t)=>{let a=p().find(n=>n.id===r),u=1;return a&&(u=a.quantity,t=a.price),{quantity:u,price:t}},A=r=>{d=d.filter(o=>o.id!==r),localStorage.setItem("cartProducts",JSON.stringify(d));let t=document.querySelector(`#card${r}`);t&&t.remove(),x(d),q()};let N=S.filter(r=>d.some(t=>t.id===r.id));const T=()=>{N.forEach(r=>{const{id:t,name:o,category:a,price:u,actualPrice:n,stock:i,image:m}=r;let c=document.importNode(v.content,!0);c.querySelector("#cartIndex").setAttribute("id",`card${t}`);const e=I(t,u);c.querySelector(".productName").textContent=o,c.querySelector(".category").textContent=a,c.querySelector(".quantity").textContent=e.quantity,c.querySelector(".actualPrice").textContent=` ₹ ${n*e.quantity}`,c.querySelector(".price").textContent=`₹ ${e.price}`,c.querySelector(".productImage").src=m,c.querySelector(".productImage").alt=m,c.querySelector(".qtyElem").addEventListener("click",l=>{b(l,t,i,u,n)}),c.querySelector(".btn-remove").addEventListener("click",()=>{A(t)}),L.append(c)})};T();q();
